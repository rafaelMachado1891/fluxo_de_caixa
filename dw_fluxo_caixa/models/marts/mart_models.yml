models:
  - name: dim_clientes
    description: 'tabela dimensão com o cadastro de terceiros'
    columns:
      - name: id_cliente
        description: 'identificador unico do cadastro do terceiros'
        data_type: INTEGER
        tests:
          - not_null
      
      - name: razao_social
        descrition: 'razão social do terceiro'
        data_type: TEXT

  - name: dim_data
    description: 'tabela calendario do modelo'
    columns:
      - name: data
        description: 'data no formato yyyy-MM-dd'
        data_type: DATE
      
      - name: mes
        description: 'mes numerico'
        data_type: INTEGER

      - name: nome_mes
        description: 'nome do mes abreviado'
        data_type: TEXT
      
      - name: dia 
        description: 'dia do mes'
        data_type: INTEGER

      - name: trimestre
        description: 'trimestre do ano'
        data_type: INTEGER

      - name: ano
        description: 'ano calendario'
        data_type: INTEGER
  
  - name: dim_instituicoes
    description: 'tabela dimensao com o cadastro das instituicoes de pagamento'
    columns:
      - name: id_banco
        description: 'identificador unico da instituicao de pagamento'
        data_type: INTEGER
        tests:
          - not_null

      - name: razao_social
        description: 'razao social da instituicao de pagamento'
        data_type: TEXT
  
  - name: dim_plano_contas
    description: 'tabela de plano de contas contabil da organizacao'
    columns:
      - name: codigo
        description: 'identificador unico da conta contabil'
        data_type: INTEGER
        tests:
          - not_null

      - name: codigo_conta_contabil
        description: 'codigo hierarquico da conta contabil'
        data_type: TEXT
        tests:
          - not_null

      - name: conta_contabil
        description: 'descricao da conta contabil'
        data_type: TEXT

      - name: grupo_fluxo_caixa
        description: 'indica o grupo do fluxo de caixa (operacional/ nao operacional/ financeiro)'
        data_type: TEXT

      - name: natureza_fluxo
        description: 'indica a natureza de movimentacao da conta (entrada/saida)'
        data_type: TEXT

      - name: tipo_de_conta
        description: 'representa a categoria da conta contabil'
        data_type: TEXT

      - name: recorrencia
        description: 'indica se a conta e recorrente ou nao'
        data_type: TEXT
    
  - name: dim_saldo_inicial
    description: 'tabela que mostra o saldo inicial de caixa'
    columns:
      - name: data_inicial
        description: 'data base do saldo de caixa'
        data_type: DATE

      - name: saldo
        description: 'valor apurado em caixa na data estipulada'
        data_type: DECIMAL

  - name: mart_lancamentos
    description: 'tabela agrupada com os lancamentos de titulos e lancamentos avulsos no fluxo de caixa do ERP de origem'
    columns:
      columns:
      - name: numero_do_titulo
        description: 'numero do titulo vinculado ao lancamento'
        data_type: TEXT
        tests:
          - not_null
        
      - name: serie
        description: 'numero de serie do titulo foi efetuado tratamento de S/N (sem numero), quando não informado'
        data_type: TEXT

      - name: numero_da_parcela
        description: 'representa o numero da parcela do lancamento quando 0 a parcela é unica'
        data_type: INTEGER
        tests:
          - not_null
      
      - name: data_emissao
        description: 'data de emissao do documento quando nao informado a data é a mesma do pagaemento'
        data_type: DATE
        tests:
          - not_null
      
      - name: vencimento
        description: 'data de vencimento do titulo, quando não informado o vencimento é igual ao pagamento'
        data_type: DATE
        tests:
          - not_null
          - relationships:
              arguments:
                to: ref('dim_data')
                field: data
      
      - name: data_pagamento
        description: 'data de pagamento do titulo'
        data_type: DATE
        tests:
          - not_null

      - name: valor_titulo
        description: 'valor monetario do documento'
        data_type: DECIMAL
        tests:
          - valores_positivos
          - not_null

      - name: tipo_pagamento
        description: 'indica se o lancamento e de entrada ou saida'
        data_type: TEXT
        tests:
          - not_null

      - name: instituicao
        description: 'identificador do codigo da instituicao financeira'
        data_type: INTEGER
        tests:
          - not_null
          - relationships:
            to: ref('dim_instituicoes')
            field: id_banco

      - name: situacao_titulo
        description: 'indica a situacao do titulo (pago/pendente/parcial)'
        data_type: TEXT
        tests:
         - not_null
      
      - name: id_conta_contabil
        description: 'identificador do cliente'
        data_type: INTEGER
        tests:
          - not_null
          - relationships:
            to: ref('dim_plano_contas')
            field: codigo
          
      - name: id_cliente
        description: 'identificador do cliente'
        data_type: 'INTEGER'
        tests: 
          - not_null
          - relationships:
            to: ref('dim_clientes')
            field: id_cliente
      
      - name: tipo_lancamento
        description: 'indica se o lancamento corresponde a um titulo ou a uma movimentacao avulsa'
        data_type: TEXT
      
      - name: tipo_fluxo
        description: 'indica se o registro e um fluxo realizado ou projetado'
        data_type: TEXT

     
